# Nginx

### 负载均衡策略

实现是通过 `upstream` +  `proxy_pass` 实现的

#### 负载均衡策略

* 轮询 \(默认\)
  * 在轮询中，如果服务器down掉了，会自动剔除该服务器。
  * 缺省配置就是轮询策略。
  * 此策略适合服务器配置相当，无状态且短平快的服务使用。
* 权重

  weight参数用于制定轮询的几率

  * 权重越高分配到需要处理的请求越多。
  * 此策略可以与least\_conn和ip\_hash结合使用。
  * 此策略比较适合服务器的硬件配置差别比较大的情况。

* ip\_hash

  负载均衡器按照客户端IP地址的分配方式，可以确保相同客户端的请求一直发送到相同的服务器

  * 此策略适合有状态服务，比如session。
  * 当有服务器需要剔除，必须手动down掉。

* least\_conn 最小连接

  把请求转发给连接数较少的后端服务器



